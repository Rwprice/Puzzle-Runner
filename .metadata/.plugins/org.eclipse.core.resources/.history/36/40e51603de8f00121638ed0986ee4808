package com.earthquakeunicorn.puzzlerunner;

import java.util.ArrayList;

import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.graphics.Camera;
import com.badlogic.gdx.graphics.g2d.SpriteBatch;
import com.badlogic.gdx.math.Vector2;
import com.earthquakeunicorn.puzzlerunner.animateobjects.Player;
import com.earthquakeunicorn.puzzlerunner.blocks.Block;

public class Level 
{
	public ArrayList<Block> blocks;
	//public ArrayList<Enemy> enemies;
	public ArrayList<Block> spikes;
	
	public Player player;
	
	public Block winBlock;
	
	public Vector2 initialPosition;
	
	public Level()
	{
		blocks = new ArrayList<Block>();
		spikes = new ArrayList<Block>();
	}
	
	public void addBlock(Block block)
	{
		blocks.add(block);
	}
	
	public void addSpike(Block spike)
	{
		spikes.add(spike);
	}
	
	public void addWinBlock(Block win)
	{
		winBlock = win;
	}
	
	public void addPlayer(Player p)
	{
		player = p;
		initialPosition = new Vector2(p.rect.x, p.rect.y);
	}
	
	public void update(float delta, Camera camera)
	{
		player.update(Gdx.graphics.getDeltaTime(), camera);
	}
	
	public void draw(SpriteBatch batch)
	{
		for(Block cur : blocks)
			cur.draw(batch);
		
		for(Block cur : spikes)
			cur.draw(batch);			
		
		winBlock.draw(batch);
		
		player.draw(batch);
	}
	
	public void reset()
	{
		player.move(initialPosition);
		player.isAlive = true;
	}
}
